{"version":3,"sources":["../../../src/utils/range.ts"],"names":["EMPTY","FULL","Infinity","add","rangeList","range","newRangeList","len","length","insertPosition","i","range0","push","Math","min","max","splice"],"mappings":";;;;;;;AAMO,IAAMA,KAAK,GAAG,EAAd;;AACA,IAAMC,IAAI,GAAG,CAAC,CAAC,CAAD,EAAIC,QAAJ,CAAD,CAAb;;;AAGA,SAASC,GAAT,CAAaC,SAAb,EAAwBC,KAAxB,EAA+B;AAEpC,MAAID,SAAS,KAAKH,IAAlB,EAAwB;AACtB,WAAOG,SAAP;AACD;;AAGD,MAAIC,KAAK,CAAC,CAAD,CAAL,GAAW,CAAf,EAAkB;AAChBA,IAAAA,KAAK,CAAC,CAAD,CAAL,GAAW,CAAX;AACD;;AACD,MAAIA,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EAA0B;AACxB,WAAOD,SAAP;AACD;;AAGD,MAAME,YAAsB,GAAG,EAA/B;AACA,MAAMC,GAAG,GAAGH,SAAS,CAACI,MAAtB;AACA,MAAIC,cAAc,GAAG,CAArB;;AAEA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,GAApB,EAAyBG,CAAC,EAA1B,EAA8B;AAC5B,QAAMC,MAAM,GAAGP,SAAS,CAACM,CAAD,CAAxB;;AAEA,QAAIC,MAAM,CAAC,CAAD,CAAN,GAAYN,KAAK,CAAC,CAAD,CAArB,EAA0B;AAExBC,MAAAA,YAAY,CAACM,IAAb,CAAkBD,MAAlB;AACAF,MAAAA,cAAc,GAAGC,CAAC,GAAG,CAArB;AACD,KAJD,MAIO,IAAIC,MAAM,CAAC,CAAD,CAAN,GAAYN,KAAK,CAAC,CAAD,CAArB,EAA0B;AAE/BC,MAAAA,YAAY,CAACM,IAAb,CAAkBD,MAAlB;AACD,KAHM,MAGA;AACLN,MAAAA,KAAK,GAAG,CAACQ,IAAI,CAACC,GAAL,CAASH,MAAM,CAAC,CAAD,CAAf,EAAoBN,KAAK,CAAC,CAAD,CAAzB,CAAD,EAAgCQ,IAAI,CAACE,GAAL,CAASJ,MAAM,CAAC,CAAD,CAAf,EAAoBN,KAAK,CAAC,CAAD,CAAzB,CAAhC,CAAR;AACD;AACF;;AACDC,EAAAA,YAAY,CAACU,MAAb,CAAoBP,cAApB,EAAoC,CAApC,EAAuCJ,KAAvC;AACA,SAAOC,YAAP;AACD","sourcesContent":["/*\n * range (Array)\n *   + start (Number) - the start index (incl.)\n *   + end (Number) - the end index (excl.)\n * rangeList (Array) - array of sorted, combined ranges\n */\nexport const EMPTY = [];\nexport const FULL = [[0, Infinity]];\n\n// Insert a range into a range collection\nexport function add(rangeList, range) {\n  // Noop if range collection already covers all\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  // Validate the input range\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  // TODO - split off to tree-shakable Range class\n  const newRangeList: number[] = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      // the current range is to the left of the new range\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      // the current range is to the right of the new range\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n"],"file":"range.js"}